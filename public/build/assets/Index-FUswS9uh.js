import{r as c,w as j,c as i,e as C,u as o,f as B,g as y,j as t,p as a,k as l,z as d,l as h,F as x,q as f,x as b,A as F,B as T,C as U,y as E,D as O,b as z}from"./app-B583slAp.js";import{_ as H}from"./AuthenticatedLayout-DBlEkb_k.js";import{u as I}from"./useDragScroll-RGJwlJvc.js";const R={class:"py-12"},W={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},q={key:0,class:"mb-4 rounded-md bg-emerald-400/15 p-4 ring-1 ring-emerald-400/20"},J={class:"text-sm text-emerald-300"},$={class:"mb-4 flex flex-wrap items-end gap-4"},G={class:"w-full sm:w-auto"},Q=["value"],X={key:0,class:"w-full sm:w-auto"},Y={key:1,class:"w-full sm:w-auto"},Z=["value"],ee={key:1,class:"overflow-hidden rounded-2xl bg-white/10 shadow-lg backdrop-blur-md ring-1 ring-white/15"},te={class:"p-4 sm:p-6"},se={class:"flex flex-wrap items-center justify-between gap-3 mb-4"},ae={class:"text-lg font-medium text-white"},ie={class:"flex items-center gap-2"},oe=["href"],le={key:0,class:"min-w-full divide-y divide-white/10"},ne={class:"bg-white/5"},re={key:0,class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},de={class:"divide-y divide-white/10"},ue={class:"whitespace-nowrap px-6 py-4 text-sm text-white uppercase"},me={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},pe={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/80 uppercase"},xe={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},ge={key:0,class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},we={class:"px-6 py-4 text-sm text-sky-200/80 uppercase min-w-[12rem]"},ke={class:"whitespace-nowrap px-6 py-4"},ce={class:"px-6 py-4 text-sm text-sky-200/50 uppercase min-w-[10rem]"},ye={key:0,class:"text-sm text-sky-200/50 mt-4"},he={key:2,class:"overflow-hidden rounded-2xl bg-white/10 shadow-lg backdrop-blur-md ring-1 ring-white/15"},Me={__name:"Index",props:{meetings:Object,meeting:Object,attendances:Array,filters:Object,mpkkList:Array},setup(r){const g=r,w=O(),p=c(g.filters.meeting_id||""),n=c(g.filters.category||""),u=c(g.filters.mpkk||""),{scrollEl:P,onMouseDown:v,onMouseLeave:M,onMouseUp:_,onMouseMove:K}=I();function k(){const m={meeting_id:p.value};n.value&&(m.category=n.value),n.value==="mpkk"&&u.value&&(m.mpkk=u.value),z.get(route("attendances.index"),m,{preserveState:!0,replace:!0})}function S(){n.value="",u.value="",k()}function A(){u.value="",k()}function D(){k()}j(n,m=>{m!=="mpkk"&&(u.value="")});const L={matc:"Cabang",amk:"AMK",wanita:"Wanita Cabang",mpkk:"MPKK"},V={present:"Hadir",absent:"Tidak Hadir",late:"Lewat",excused:"Dimaafkan"},N={present:"bg-emerald-400/15 text-emerald-300 ring-1 ring-emerald-400/20",absent:"bg-red-400/15 text-red-300 ring-1 ring-red-400/20",late:"bg-yellow-400/15 text-yellow-300 ring-1 ring-yellow-400/20",excused:"bg-white/10 text-sky-200 ring-1 ring-white/15"};return(m,e)=>(a(),i(x,null,[C(o(B),{title:"Kehadiran"}),C(H,null,{header:y(()=>[...e[7]||(e[7]=[t("h2",{class:"text-xl font-semibold leading-tight text-white"},"Rekod Kehadiran",-1)])]),default:y(()=>[t("div",R,[t("div",W,[o(w).props.flash.success?(a(),i("div",q,[t("p",J,l(o(w).props.flash.success),1)])):d("",!0),t("div",$,[t("div",G,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"Pilih Mesyuarat",-1)),h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),onChange:S,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:min-w-[20rem]"},[e[8]||(e[8]=t("option",{value:"",class:"bg-sky-900 text-white"},"-- Pilih Mesyuarat --",-1)),(a(!0),i(x,null,f(r.meetings.data,s=>(a(),i("option",{key:s.id,value:s.id,class:"bg-sky-900 text-white"},l(s.title)+" ("+l(s.date)+") ",9,Q))),128))],544),[[b,p.value]])]),p.value?(a(),i("div",X,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"Kategori",-1)),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),onChange:A,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:w-48"},[...e[10]||(e[10]=[t("option",{value:"",class:"bg-sky-900 text-white"},"Semua",-1),t("option",{value:"matc",class:"bg-sky-900 text-white"},"Cabang",-1),t("option",{value:"wanita",class:"bg-sky-900 text-white"},"Wanita Cabang",-1),t("option",{value:"amk",class:"bg-sky-900 text-white"},"AMK",-1),t("option",{value:"mpkk",class:"bg-sky-900 text-white"},"MPKK",-1)])],544),[[b,n.value]])])):d("",!0),n.value==="mpkk"?(a(),i("div",Y,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"MPKK",-1)),h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s),onChange:D,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:w-64"},[e[12]||(e[12]=t("option",{value:"",class:"bg-sky-900 text-white"},"Semua MPKK",-1)),(a(!0),i(x,null,f(r.mpkkList,s=>(a(),i("option",{key:s,value:s,class:"bg-sky-900 text-white"},l(s),9,Z))),128))],544),[[b,u.value]])])):d("",!0)]),r.meeting?(a(),i("div",ee,[t("div",te,[t("div",se,[t("h3",ae,l(r.meeting.title),1),t("div",ie,[n.value?(a(),i("a",{key:0,href:m.route("export.attendance.pdf",{meeting_id:p.value,category:n.value,mpkk:u.value||void 0}),class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-600/30 hover:bg-emerald-500"}," Muat Turun PDF ",8,oe)):d("",!0),o(w).props.auth.user.is_admin?(a(),F(o(T),{key:1,href:m.route("attendances.mark",r.meeting.id),class:"inline-flex items-center rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 hover:bg-sky-400"},{default:y(()=>[...e[14]||(e[14]=[U(" Rekod Kehadiran ",-1)])]),_:1},8,["href"])):d("",!0)])]),t("div",{ref_key:"scrollEl",ref:P,class:"overflow-x-auto cursor-grab",onMousedown:e[3]||(e[3]=(...s)=>o(v)&&o(v)(...s)),onMouseleave:e[4]||(e[4]=(...s)=>o(M)&&o(M)(...s)),onMouseup:e[5]||(e[5]=(...s)=>o(_)&&o(_)(...s)),onMousemove:e[6]||(e[6]=(...s)=>o(K)&&o(K)(...s))},[r.attendances.length?(a(),i("table",le,[t("thead",ne,[t("tr",null,[e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Nama Ahli",-1)),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"No. IC",-1)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Kategori",-1)),e[18]||(e[18]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Jawatan",-1)),n.value==="mpkk"?(a(),i("th",re,"MPKK")):d("",!0),e[19]||(e[19]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Alamat",-1)),e[20]||(e[20]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Status",-1)),e[21]||(e[21]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Sebab",-1))])]),t("tbody",de,[(a(!0),i(x,null,f(r.attendances,s=>(a(),i("tr",{key:s.id,class:"hover:bg-white/5"},[t("td",ue,l(s.member?.name),1),t("td",me,l(s.member?.ic_number),1),t("td",pe,l(s.member?.category_type==="mpkk"?s.member?.position_name||"MPKK":L[s.member?.category_type]||"-"),1),t("td",xe,l(s.member?.position_type||"-"),1),n.value==="mpkk"?(a(),i("td",ge,l(s.member?.position_name||"-"),1)):d("",!0),t("td",we,l(s.member?.address||"-"),1),t("td",ke,[t("span",{class:E(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",N[s.status]||"bg-white/10 text-sky-200 ring-1 ring-white/15"])},l(V[s.status]||s.status),3)]),t("td",ce,l(s.status==="absent"&&s.absence_reason||"-"),1)]))),128))])])):d("",!0)],544),r.attendances.length?d("",!0):(a(),i("p",ye,"Tiada rekod kehadiran untuk mesyuarat ini."))])])):(a(),i("div",he,[...e[22]||(e[22]=[t("div",{class:"p-6 text-center text-sm text-sky-200/50"}," Sila pilih mesyuarat untuk melihat rekod kehadiran. ",-1)])]))])])]),_:1})],64))}};export{Me as default};
