import{r as k,w as P,c as r,e as h,u as o,f as F,g as w,j as t,p as a,k as n,z as d,l as _,m as H,x as A,F as c,q as M,A as f,C as g,B as S,y as z,b as V,D as I}from"./app-BhknnsrO.js";import{_ as O}from"./AuthenticatedLayout-C1VgMyvP.js";import{u as W}from"./useDragScroll-D5X5_HyM.js";const $={class:"flex items-center justify-between"},q={class:"py-12"},J={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},R={key:0,class:"mb-4 rounded-md bg-emerald-400/15 p-4 ring-1 ring-emerald-400/20"},G={class:"text-sm text-emerald-300"},Q={key:1,class:"mb-4 rounded-md bg-red-400/15 p-4 ring-1 ring-red-400/20"},X={class:"text-sm text-red-300"},Y={class:"mb-4 flex flex-wrap items-end gap-4"},Z={class:"w-full sm:w-auto"},ee={class:"w-full sm:w-auto"},te={key:0,class:"w-full sm:w-auto"},se=["value"],ae=["disabled"],oe={key:0,class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},re={class:"overflow-hidden rounded-2xl bg-white/10 shadow-lg backdrop-blur-md ring-1 ring-white/15"},le={class:"min-w-full divide-y divide-white/10"},ie={class:"bg-white/5"},ne={key:0,class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},de={class:"divide-y divide-white/10"},ue={class:"whitespace-nowrap px-6 py-4 uppercase"},pe={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},me={class:"whitespace-nowrap px-6 py-4"},ce={class:"inline-flex items-center rounded-full bg-sky-400/15 px-2.5 py-0.5 text-xs font-medium text-sky-300 ring-1 ring-sky-400/20 uppercase"},xe={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},ye={key:0,class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},we={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},ke={class:"px-6 py-4 text-sm text-sky-200/50 uppercase min-w-[12rem]"},he={class:"whitespace-nowrap px-6 py-4 text-right text-sm"},fe=["onClick"],ge={key:0},ve=["colspan"],be={key:2,class:"mt-4 flex justify-center"},_e=["innerHTML"],Le={__name:"Index",props:{members:Object,filters:Object,mpkkList:Array},setup(p){const v=p,m=I(),x=k(v.filters.search||""),i=k(v.filters.category||""),u=k(v.filters.mpkk||""),{scrollEl:j,onMouseDown:C,onMouseLeave:K,onMouseUp:T,onMouseMove:L}=W();function b(){const l={};x.value&&(l.search=x.value),i.value&&(l.category=i.value),i.value==="mpkk"&&u.value&&(l.mpkk=u.value),V.get(route("members.index"),l,{preserveState:!0,replace:!0})}P(x,()=>b());function B(){u.value="",b()}function D(){b()}P(i,l=>{l!=="mpkk"&&(u.value="")});function N(l){confirm("Adakah anda pasti mahu memadam ahli ini?")&&V.delete(route("members.destroy",l))}const U={matc:"Cabang",amk:"AMK",wanita:"Wanita Cabang",mpkk:"MPKK"},y=k(!1);function E(){const l=new URLSearchParams({category:i.value});u.value&&l.set("mpkk",u.value);const e="/export/members-pdf?"+l.toString();y.value=!0;const s=document.createElement("iframe");s.style.display="none",s.src=e,document.body.appendChild(s),setTimeout(()=>{y.value=!1,s.remove()},1e4)}return(l,e)=>(a(),r(c,null,[h(o(F),{title:"Ahli"}),h(O,null,{header:w(()=>[t("div",$,[e[8]||(e[8]=t("h2",{class:"text-xl font-semibold leading-tight text-white"},"Senarai Ahli",-1)),o(m).props.auth.user.is_admin?(a(),S(o(g),{key:0,href:l.route("members.create"),class:"inline-flex items-center rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 hover:bg-sky-400"},{default:w(()=>[...e[7]||(e[7]=[f(" Tambah Ahli ",-1)])]),_:1},8,["href"])):d("",!0)])]),default:w(()=>[t("div",q,[t("div",J,[o(m).props.flash.success?(a(),r("div",R,[t("p",G,n(o(m).props.flash.success),1)])):d("",!0),o(m).props.flash.error?(a(),r("div",Q,[t("p",X,n(o(m).props.flash.error),1)])):d("",!0),t("div",Y,[t("div",Z,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"Cari",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),type:"text",placeholder:"Cari ahli...",class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 placeholder-sky-200/40 focus:ring-2 focus:ring-sky-400 sm:w-64"},null,512),[[H,x.value]])]),t("div",ee,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"Kategori",-1)),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),onChange:B,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:w-48"},[...e[10]||(e[10]=[t("option",{value:"",class:"bg-sky-900 text-white"},"Semua",-1),t("option",{value:"matc",class:"bg-sky-900 text-white"},"Cabang",-1),t("option",{value:"wanita",class:"bg-sky-900 text-white"},"Wanita Cabang",-1),t("option",{value:"amk",class:"bg-sky-900 text-white"},"AMK",-1),t("option",{value:"mpkk",class:"bg-sky-900 text-white"},"MPKK",-1)])],544),[[A,i.value]])]),i.value==="mpkk"?(a(),r("div",te,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"MPKK",-1)),_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s),onChange:D,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:w-64"},[e[12]||(e[12]=t("option",{value:"",class:"bg-sky-900 text-white"},"Semua MPKK",-1)),(a(!0),r(c,null,M(p.mpkkList,s=>(a(),r("option",{key:s,value:s,class:"bg-sky-900 text-white"},n(s),9,se))),128))],544),[[A,u.value]])])):d("",!0),i.value?(a(),r("button",{key:1,type:"button",onClick:E,disabled:y.value,class:"inline-flex items-center gap-2 rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-600/30 hover:bg-emerald-500 disabled:opacity-50"},[y.value?(a(),r("svg",oe,[...e[14]||(e[14]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):d("",!0),f(" "+n(y.value?"Memuat turun...":"Muat Turun PDF"),1)],8,ae)):d("",!0)]),t("div",re,[t("div",{ref_key:"scrollEl",ref:j,class:"overflow-x-auto cursor-grab",onMousedown:e[3]||(e[3]=(...s)=>o(C)&&o(C)(...s)),onMouseleave:e[4]||(e[4]=(...s)=>o(K)&&o(K)(...s)),onMouseup:e[5]||(e[5]=(...s)=>o(T)&&o(T)(...s)),onMousemove:e[6]||(e[6]=(...s)=>o(L)&&o(L)(...s))},[t("table",le,[t("thead",ie,[t("tr",null,[e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Nama",-1)),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"No. IC",-1)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Kategori",-1)),e[18]||(e[18]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Jawatan",-1)),i.value==="mpkk"?(a(),r("th",ne,"MPKK")):d("",!0),e[19]||(e[19]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Telefon",-1)),e[20]||(e[20]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Alamat",-1)),e[21]||(e[21]=t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Tindakan",-1))])]),t("tbody",de,[(a(!0),r(c,null,M(p.members.data,s=>(a(),r("tr",{key:s.id,class:"hover:bg-white/5"},[t("td",ue,[h(o(g),{href:l.route("members.show",s.id),class:"text-sky-300 hover:text-sky-200"},{default:w(()=>[f(n(s.name),1)]),_:2},1032,["href"])]),t("td",pe,n(s.ic_number),1),t("td",me,[t("span",ce,n(s.category_type==="mpkk"?s.position_name||"MPKK":U[s.category_type]||s.category_type),1)]),t("td",xe,n(s.position_type||"-"),1),i.value==="mpkk"?(a(),r("td",ye,n(s.position_name||"-"),1)):d("",!0),t("td",we,n(s.phone_number),1),t("td",ke,n(s.address||"-"),1),t("td",he,[o(m).props.auth.user.is_admin?(a(),r(c,{key:0},[h(o(g),{href:l.route("members.edit",s.id),class:"text-sky-300 hover:text-sky-200 mr-3"},{default:w(()=>[...e[22]||(e[22]=[f("Ubah",-1)])]),_:1},8,["href"]),t("button",{onClick:Me=>N(s.id),class:"text-red-300 hover:text-red-200"},"Padam",8,fe)],64)):d("",!0)])]))),128)),p.members.data.length?d("",!0):(a(),r("tr",ge,[t("td",{colspan:i.value==="mpkk"?8:7,class:"px-6 py-4 text-center text-sm text-sky-200/50"},"Tiada ahli dijumpai.",8,ve)]))])])],544)]),p.members.links.length>3?(a(),r("div",be,[(a(!0),r(c,null,M(p.members.links,s=>(a(),r(c,{key:s.label},[s.url?(a(),S(o(g),{key:0,href:s.url,innerHTML:s.label,class:z(["mx-1 rounded border px-3 py-1 text-sm",s.active?"bg-sky-500 text-white border-sky-500":"bg-white/10 text-sky-100 border-white/15 hover:bg-white/20"])},null,8,["href","innerHTML","class"])):(a(),r("span",{key:1,innerHTML:s.label,class:"mx-1 rounded border border-white/10 bg-white/5 px-3 py-1 text-sm text-sky-300/40"},null,8,_e))],64))),128))])):d("",!0)])])]),_:1})],64))}};export{Le as default};
