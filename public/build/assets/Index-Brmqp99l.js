import{r as g,w as L,c as r,e as k,u as a,f as E,g as h,j as t,p as o,k as n,z as d,l as b,m as F,x as P,F as x,q as v,B as y,C as _,A,y as H,b as S,D as z,E as I}from"./app-uykAKDCt.js";import{_ as O}from"./AuthenticatedLayout-x63ACYaT.js";import{u as W}from"./useDragScroll-DwOWTSho.js";const $={class:"flex items-center justify-between"},q={class:"py-12"},J={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},R={key:0,class:"mb-4 rounded-md bg-emerald-400/15 p-4 ring-1 ring-emerald-400/20"},G={class:"text-sm text-emerald-300"},Q={key:1,class:"mb-4 rounded-md bg-red-400/15 p-4 ring-1 ring-red-400/20"},X={class:"text-sm text-red-300"},Y={class:"mb-4 flex flex-wrap items-end gap-4"},Z={class:"w-full sm:w-auto"},ee={class:"w-full sm:w-auto"},te={key:0,class:"w-full sm:w-auto"},se=["value"],ae=["href"],oe={class:"overflow-hidden rounded-2xl bg-white/10 shadow-lg backdrop-blur-md ring-1 ring-white/15"},re={class:"min-w-full divide-y divide-white/10"},ie={class:"bg-white/5"},le={key:0,class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},ne={class:"divide-y divide-white/10"},de={class:"whitespace-nowrap px-6 py-4 uppercase"},pe={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},ue={class:"whitespace-nowrap px-6 py-4"},me={class:"inline-flex items-center rounded-full bg-sky-400/15 px-2.5 py-0.5 text-xs font-medium text-sky-300 ring-1 ring-sky-400/20 uppercase"},xe={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},ce={key:0,class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},he={class:"whitespace-nowrap px-6 py-4 text-sm text-sky-200/50 uppercase"},ke={class:"px-6 py-4 text-sm text-sky-200/50 uppercase min-w-[12rem]"},ye={class:"whitespace-nowrap px-6 py-4 text-right text-sm"},we=["onClick"],fe={key:0},ge=["colspan"],be={key:2,class:"mt-4 flex justify-center"},ve=["innerHTML"],Te={__name:"Index",props:{members:Object,filters:Object,mpkkList:Array},setup(u){const w=u,m=z(),c=g(w.filters.search||""),l=g(w.filters.category||""),p=g(w.filters.mpkk||""),{scrollEl:U,onMouseDown:M,onMouseLeave:C,onMouseUp:K,onMouseMove:T}=W();function f(){const i={};c.value&&(i.search=c.value),l.value&&(i.category=l.value),l.value==="mpkk"&&p.value&&(i.mpkk=p.value),S.get(route("members.index"),i,{preserveState:!0,replace:!0})}L(c,()=>f());function V(){p.value="",f()}function j(){f()}L(l,i=>{i!=="mpkk"&&(p.value="")});function D(i){confirm("Adakah anda pasti mahu memadam ahli ini?")&&S.delete(route("members.destroy",i))}const N={matc:"Cabang",amk:"AMK",wanita:"Wanita Cabang",mpkk:"MPKK"},B=I(()=>{const i=new URLSearchParams({category:l.value});return p.value&&i.set("mpkk",p.value),"/export/members-pdf?"+i.toString()});return(i,e)=>(o(),r(x,null,[k(a(E),{title:"Ahli"}),k(O,null,{header:h(()=>[t("div",$,[e[8]||(e[8]=t("h2",{class:"text-xl font-semibold leading-tight text-white"},"Senarai Ahli",-1)),a(m).props.auth.user.is_admin?(o(),A(a(y),{key:0,href:i.route("members.create"),class:"inline-flex items-center rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 hover:bg-sky-400"},{default:h(()=>[...e[7]||(e[7]=[_(" Tambah Ahli ",-1)])]),_:1},8,["href"])):d("",!0)])]),default:h(()=>[t("div",q,[t("div",J,[a(m).props.flash.success?(o(),r("div",R,[t("p",G,n(a(m).props.flash.success),1)])):d("",!0),a(m).props.flash.error?(o(),r("div",Q,[t("p",X,n(a(m).props.flash.error),1)])):d("",!0),t("div",Y,[t("div",Z,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"Cari",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),type:"text",placeholder:"Cari ahli...",class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 placeholder-sky-200/40 focus:ring-2 focus:ring-sky-400 sm:w-64"},null,512),[[F,c.value]])]),t("div",ee,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"Kategori",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s),onChange:V,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:w-48"},[...e[10]||(e[10]=[t("option",{value:"",class:"bg-sky-900 text-white"},"Semua",-1),t("option",{value:"matc",class:"bg-sky-900 text-white"},"Cabang",-1),t("option",{value:"wanita",class:"bg-sky-900 text-white"},"Wanita Cabang",-1),t("option",{value:"amk",class:"bg-sky-900 text-white"},"AMK",-1),t("option",{value:"mpkk",class:"bg-sky-900 text-white"},"MPKK",-1)])],544),[[P,l.value]])]),l.value==="mpkk"?(o(),r("div",te,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-sky-100/80 mb-1"},"MPKK",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),onChange:j,class:"w-full rounded-md border-0 bg-white/10 text-white ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400 sm:w-64"},[e[12]||(e[12]=t("option",{value:"",class:"bg-sky-900 text-white"},"Semua MPKK",-1)),(o(!0),r(x,null,v(u.mpkkList,s=>(o(),r("option",{key:s,value:s,class:"bg-sky-900 text-white"},n(s),9,se))),128))],544),[[P,p.value]])])):d("",!0),l.value?(o(),r("a",{key:1,href:B.value,class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-600/30 hover:bg-emerald-500"}," Muat Turun PDF ",8,ae)):d("",!0)]),t("div",oe,[t("div",{ref_key:"scrollEl",ref:U,class:"overflow-x-auto cursor-grab",onMousedown:e[3]||(e[3]=(...s)=>a(M)&&a(M)(...s)),onMouseleave:e[4]||(e[4]=(...s)=>a(C)&&a(C)(...s)),onMouseup:e[5]||(e[5]=(...s)=>a(K)&&a(K)(...s)),onMousemove:e[6]||(e[6]=(...s)=>a(T)&&a(T)(...s))},[t("table",re,[t("thead",ie,[t("tr",null,[e[14]||(e[14]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Nama",-1)),e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"No. IC",-1)),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Kategori",-1)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Jawatan",-1)),l.value==="mpkk"?(o(),r("th",le,"MPKK")):d("",!0),e[18]||(e[18]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Telefon",-1)),e[19]||(e[19]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Alamat",-1)),e[20]||(e[20]=t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-sky-200/60 whitespace-nowrap"},"Tindakan",-1))])]),t("tbody",ne,[(o(!0),r(x,null,v(u.members.data,s=>(o(),r("tr",{key:s.id,class:"hover:bg-white/5"},[t("td",de,[k(a(y),{href:i.route("members.show",s.id),class:"text-sky-300 hover:text-sky-200"},{default:h(()=>[_(n(s.name),1)]),_:2},1032,["href"])]),t("td",pe,n(s.ic_number),1),t("td",ue,[t("span",me,n(s.category_type==="mpkk"?s.position_name||"MPKK":N[s.category_type]||s.category_type),1)]),t("td",xe,n(s.position_type||"-"),1),l.value==="mpkk"?(o(),r("td",ce,n(s.position_name||"-"),1)):d("",!0),t("td",he,n(s.phone_number),1),t("td",ke,n(s.address||"-"),1),t("td",ye,[a(m).props.auth.user.is_admin?(o(),r(x,{key:0},[k(a(y),{href:i.route("members.edit",s.id),class:"text-sky-300 hover:text-sky-200 mr-3"},{default:h(()=>[...e[21]||(e[21]=[_("Ubah",-1)])]),_:1},8,["href"]),t("button",{onClick:_e=>D(s.id),class:"text-red-300 hover:text-red-200"},"Padam",8,we)],64)):d("",!0)])]))),128)),u.members.data.length?d("",!0):(o(),r("tr",fe,[t("td",{colspan:l.value==="mpkk"?8:7,class:"px-6 py-4 text-center text-sm text-sky-200/50"},"Tiada ahli dijumpai.",8,ge)]))])])],544)]),u.members.links.length>3?(o(),r("div",be,[(o(!0),r(x,null,v(u.members.links,s=>(o(),r(x,{key:s.label},[s.url?(o(),A(a(y),{key:0,href:s.url,innerHTML:s.label,class:H(["mx-1 rounded border px-3 py-1 text-sm",s.active?"bg-sky-500 text-white border-sky-500":"bg-white/10 text-sky-100 border-white/15 hover:bg-white/20"])},null,8,["href","innerHTML","class"])):(o(),r("span",{key:1,innerHTML:s.label,class:"mx-1 rounded border border-white/10 bg-white/5 px-3 py-1 text-sm text-sky-300/40"},null,8,ve))],64))),128))])):d("",!0)])])]),_:1})],64))}};export{Te as default};
