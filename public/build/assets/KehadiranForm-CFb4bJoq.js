import{c as i,y as n,j as t,k as g,z as m,l as c,m as p,x as T,F as G,q as U,O as B,C as H,G as q,r as d,I as W,p as o,P as $}from"./app-Co0SLnrY.js";const Y={class:"flex"},Q={class:"flex"},X={class:"absolute -left-[9999px]","aria-hidden":"true",tabindex:"-1"},Z={key:0},_=["value"],ee={key:1},te=["value"],ae={key:2},se=["value"],re={class:"flex gap-4"},ne={class:"flex items-center gap-2 cursor-pointer"},le={class:"flex items-center gap-2 cursor-pointer"},ie={key:3},oe=["disabled"],ue={key:0,class:"inline-flex items-center gap-2"},de={key:1},ge={__name:"KehadiranForm",props:{category:{type:String,required:!0},meetingId:{type:Number,required:!0},verifyUrl:{type:String,required:!0},formToken:{type:String,default:""},dark:{type:Boolean,default:!1}},emits:["verified"],setup(s,{emit:E}){const h=s,C=E,v=d(""),w=d(""),K=d(""),A=d(""),M=d(""),k=d(""),b=d("hadir"),f=d(""),N=d(""),D=["MPKK BERTAM INDAH","MPKK BUMBUNG LIMA","MPKK PERMATANG TINGGI B","MPKK PAYA KELADI","MPKK BERTAM PERDANA","MPKK PERMATANG LANGSAT","MPKK PINANG TUNGGAL","MPKK KG BAHARU","MPKK KG SELAMAT UTARA","MPKK KG SELAMAT RANGKAIAN","MPKK KG SELAMAT SELATAN","MPKK KUBANG MENERONG","MPKK KG TOK BEDU","MPKK KG DATUK","MPKK PERMATANG SINTOK","MPKK PERMATANG RAMBAI","MPKK JALAN KEDAH","MPKK PADANG BENGGALI","MPKK DUN PENAGA"],P=d(!1),l=d({}),I=d(""),x=d(""),S=W(()=>({matc:["Ketua Cabang","Timbalan Ketua Cabang","Naib Ketua Cabang","Setiausaha","Setiausaha Pengelola","Bendahari","Ketua Penerangan / Komunikasi","AJK"],amk:["Ketua AMK","Timbalan Ketua AMK","Naib Ketua AMK","Setiausaha","Bendahari","Ketua Penerangan","AJK"],wanita:["Ketua Wanita","Timbalan Ketua Wanita","Naib Ketua Wanita","Setiausaha","Bendahari","Ketua Penerangan","AJK"],mpkk:["Pengerusi","Timbalan Pengerusi","Setiausaha","Bendahari","AJK"]}[h.category]||[]).map(e=>({value:e,label:e})));function L(r){if(r.length!==12)return!1;const e=parseInt(r.substring(2,4),10),a=parseInt(r.substring(4,6),10),u=parseInt(r.substring(6,8),10);return e<1||e>12||a<1||a>31?!1:u>=1&&u<=16||u>=21&&u<=59||u>=60&&u<=76||u>=82&&u<=93||u===98||u===99}function R(){const r={};v.value.trim()||(r.name="Nama wajib diisi.");const e=w.value.replace(/\D/g,"");return e?e.length!==12?r.ic_number="No. IC mestilah 12 digit.":L(e)||(r.ic_number="Format No. IC tidak sah."):r.ic_number="No. IC wajib diisi.",h.category==="mpkk"&&!M.value&&(r.mpkk_name="Sila pilih MPKK."),k.value||(r.position_type="Sila pilih jenis jawatan."),b.value==="tidak_hadir"&&!f.value.trim()&&(r.absence_reason="Sila nyatakan sebab tidak hadir."),l.value=r,Object.keys(r).length===0}async function V(){if(R()){P.value=!0,I.value="",x.value="";try{const r={name:v.value.trim(),ic_number:w.value.replace(/\D/g,""),phone_number:K.value.trim()||null,address:A.value.trim()||null,position_type:k.value,mpkk_name:h.category==="mpkk"?M.value:null,status:b.value,absence_reason:b.value==="tidak_hadir"&&f.value.trim()||null,website:N.value,_ft:h.formToken},e=await $.post(h.verifyUrl,r);j(),C("verified",e.data.message)}catch(r){if(r.response?.status===422){const e=r.response.data.errors||{};if(Object.keys(e).length){l.value={};for(const[a,u]of Object.entries(e))l.value[a]=Array.isArray(u)?u[0]:u}else r.response.data?.message&&(x.value=r.response.data.message)}else r.response?.data?.message?x.value=r.response.data.message:x.value="Ralat berlaku. Sila cuba lagi."}finally{P.value=!1}}}function j(){v.value="",w.value="",K.value="",A.value="",M.value="",k.value="",b.value="hadir",f.value="",l.value={}}function y(r){if(l.value[r]){const{[r]:e,...a}=l.value;l.value=a}}function O(r){v.value=(r.target.value||"").toUpperCase(),y("name")}function F(r){K.value=(r.target.value||"").replace(/\D/g,"")}function J(r){A.value=(r.target.value||"").toUpperCase()}function z(r){f.value=(r.target.value||"").toUpperCase(),y("absence_reason")}return(r,e)=>(o(),i("div",null,[I.value?(o(),i("div",{key:0,class:n(["mb-4 rounded-md p-4",s.dark?"bg-green-500/20 ring-1 ring-green-400/30":"bg-green-50"])},[t("div",Y,[e[15]||(e[15]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"})])],-1)),t("p",{class:n(["ml-3 text-sm font-medium",s.dark?"text-green-300":"text-green-800"])},g(I.value),3)])],2)):m("",!0),x.value?(o(),i("div",{key:1,class:n(["mb-4 rounded-md p-4",s.dark?"bg-red-500/20 ring-1 ring-red-400/30":"bg-red-50"])},[t("div",Q,[e[16]||(e[16]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),t("p",{class:n(["ml-3 text-sm font-medium",s.dark?"text-red-300":"text-red-800"])},g(x.value),3)])],2)):m("",!0),t("form",{onSubmit:q(V,["prevent"]),class:"space-y-4 sm:space-y-5"},[t("div",X,[e[17]||(e[17]=t("label",{for:"website"},"Website",-1)),c(t("input",{id:"website","onUpdate:modelValue":e[0]||(e[0]=a=>N.value=a),type:"text",name:"website",tabindex:"-1",autocomplete:"off"},null,512),[[p,N.value]])]),s.category==="mpkk"?(o(),i("div",Z,[t("label",{for:"mpkk_name",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"Pilih MPKK",2),c(t("select",{id:"mpkk_name","onUpdate:modelValue":e[1]||(e[1]=a=>M.value=a),onChange:e[2]||(e[2]=a=>y("mpkk_name")),class:n(["mt-1 block w-full rounded-lg shadow-sm",[s.dark?"border-0 bg-white/10 text-white ring-1 focus:ring-2 "+(l.value.mpkk_name?"ring-red-400/50 focus:ring-red-400":"ring-white/15 focus:ring-sky-400"):l.value.mpkk_name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"]])},[t("option",{value:"",class:n(s.dark?"bg-sky-900 text-white":"")},"-- Pilih MPKK --",2),(o(),i(G,null,U(D,a=>t("option",{key:a,value:a,class:n(s.dark?"bg-sky-900 text-white":"")},g(a),11,_)),64))],34),[[T,M.value]]),l.value.mpkk_name?(o(),i("p",{key:0,class:n(["mt-1 text-xs sm:text-sm",s.dark?"text-red-300":"text-red-600"])},g(l.value.mpkk_name),3)):m("",!0)])):m("",!0),s.category==="mpkk"?(o(),i("div",ee,[t("label",{for:"position_type_mpkk",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"Jawatan Dalam MPKK",2),c(t("select",{id:"position_type_mpkk","onUpdate:modelValue":e[3]||(e[3]=a=>k.value=a),onChange:e[4]||(e[4]=a=>y("position_type")),class:n(["mt-1 block w-full rounded-lg shadow-sm",[s.dark?"border-0 bg-white/10 text-white ring-1 focus:ring-2 "+(l.value.position_type?"ring-red-400/50 focus:ring-red-400":"ring-white/15 focus:ring-sky-400"):l.value.position_type?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"]])},[t("option",{value:"",class:n(s.dark?"bg-sky-900 text-white":"")},"-- Pilih jawatan --",2),(o(!0),i(G,null,U(S.value,a=>(o(),i("option",{key:a.value,value:a.value,class:n(s.dark?"bg-sky-900 text-white":"")},g(a.label),11,te))),128))],34),[[T,k.value]]),l.value.position_type?(o(),i("p",{key:0,class:n(["mt-1 text-xs sm:text-sm",s.dark?"text-red-300":"text-red-600"])},g(l.value.position_type),3)):m("",!0)])):m("",!0),t("div",null,[t("label",{for:"name",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"Nama Penuh",2),c(t("input",{id:"name","onUpdate:modelValue":e[5]||(e[5]=a=>v.value=a),type:"text",autocomplete:"name",onInput:O,class:n(["mt-1 block w-full rounded-lg shadow-sm text-base sm:text-lg uppercase",[s.dark?"border-0 bg-white/10 text-white placeholder-sky-300/40 ring-1 focus:ring-2 "+(l.value.name?"ring-red-400/50 focus:ring-red-400":"ring-white/15 focus:ring-sky-400"):l.value.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"]])},null,34),[[p,v.value]]),l.value.name?(o(),i("p",{key:0,class:n(["mt-1 text-xs sm:text-sm",s.dark?"text-red-300":"text-red-600"])},g(l.value.name),3)):m("",!0)]),t("div",null,[t("label",{for:"ic_number",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"No. Kad Pengenalan",2),c(t("input",{id:"ic_number","onUpdate:modelValue":e[6]||(e[6]=a=>w.value=a),type:"text",inputmode:"numeric",placeholder:"880101145678",autocomplete:"off",onInput:e[7]||(e[7]=a=>y("ic_number")),class:n(["mt-1 block w-full rounded-lg shadow-sm text-base sm:text-lg",[s.dark?"border-0 bg-white/10 text-white placeholder-sky-300/40 ring-1 focus:ring-2 "+(l.value.ic_number?"ring-red-400/50 focus:ring-red-400":"ring-white/15 focus:ring-sky-400"):l.value.ic_number?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"]])},null,34),[[p,w.value]]),l.value.ic_number?(o(),i("p",{key:0,class:n(["mt-1 text-xs sm:text-sm",s.dark?"text-red-300":"text-red-600"])},g(l.value.ic_number),3)):m("",!0)]),t("div",null,[t("label",{for:"phone_number",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"No. Telefon",2),c(t("input",{id:"phone_number","onUpdate:modelValue":e[8]||(e[8]=a=>K.value=a),type:"tel",inputmode:"numeric",placeholder:"0121234567",autocomplete:"tel",onInput:F,class:n(["mt-1 block w-full rounded-lg shadow-sm",s.dark?"border-0 bg-white/10 text-white placeholder-sky-300/40 ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"])},null,34),[[p,K.value]])]),t("div",null,[t("label",{for:"address",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"Alamat",2),c(t("textarea",{id:"address","onUpdate:modelValue":e[9]||(e[9]=a=>A.value=a),rows:"2",onInput:J,class:n(["mt-1 block w-full rounded-lg shadow-sm uppercase",s.dark?"border-0 bg-white/10 text-white placeholder-sky-300/40 ring-1 ring-white/15 focus:ring-2 focus:ring-sky-400":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"])},null,34),[[p,A.value]])]),s.category!=="mpkk"?(o(),i("div",ae,[t("label",{for:"position_type",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"Jenis Jawatan",2),c(t("select",{id:"position_type","onUpdate:modelValue":e[10]||(e[10]=a=>k.value=a),onChange:e[11]||(e[11]=a=>y("position_type")),class:n(["mt-1 block w-full rounded-lg shadow-sm",[s.dark?"border-0 bg-white/10 text-white ring-1 focus:ring-2 "+(l.value.position_type?"ring-red-400/50 focus:ring-red-400":"ring-white/15 focus:ring-sky-400"):l.value.position_type?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"]])},[t("option",{value:"",class:n(s.dark?"bg-sky-900 text-white":"")},"-- Pilih jawatan --",2),(o(!0),i(G,null,U(S.value,a=>(o(),i("option",{key:a.value,value:a.value,class:n(s.dark?"bg-sky-900 text-white":"")},g(a.label),11,se))),128))],34),[[T,k.value]]),l.value.position_type?(o(),i("p",{key:0,class:n(["mt-1 text-xs sm:text-sm",s.dark?"text-red-300":"text-red-600"])},g(l.value.position_type),3)):m("",!0)])):m("",!0),t("div",null,[t("label",{class:n(["block text-xs font-medium sm:text-sm mb-2",s.dark?"text-sky-100/80":"text-gray-700"])},"Status Kehadiran",2),t("div",re,[t("label",ne,[c(t("input",{type:"radio","onUpdate:modelValue":e[12]||(e[12]=a=>b.value=a),value:"hadir",class:"h-4 w-4 text-emerald-500 focus:ring-emerald-400"},null,512),[[B,b.value]]),t("span",{class:n(["text-sm font-medium",s.dark?"text-white":"text-gray-800"])},"Hadir",2)]),t("label",le,[c(t("input",{type:"radio","onUpdate:modelValue":e[13]||(e[13]=a=>b.value=a),value:"tidak_hadir",class:"h-4 w-4 text-red-500 focus:ring-red-400"},null,512),[[B,b.value]]),t("span",{class:n(["text-sm font-medium",s.dark?"text-white":"text-gray-800"])},"Tidak Hadir",2)])])]),b.value==="tidak_hadir"?(o(),i("div",ie,[t("label",{for:"absence_reason",class:n(["block text-xs font-medium sm:text-sm",s.dark?"text-sky-100/80":"text-gray-700"])},"Nyatakan Sebab Tidak Hadir",2),c(t("textarea",{id:"absence_reason","onUpdate:modelValue":e[14]||(e[14]=a=>f.value=a),rows:"3",onInput:z,class:n(["mt-1 block w-full rounded-lg shadow-sm uppercase",[s.dark?"border-0 bg-white/10 text-white placeholder-sky-300/40 ring-1 focus:ring-2 "+(l.value.absence_reason?"ring-red-400/50 focus:ring-red-400":"ring-white/15 focus:ring-sky-400"):l.value.absence_reason?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"]])},null,34),[[p,f.value]]),l.value.absence_reason?(o(),i("p",{key:0,class:n(["mt-1 text-xs sm:text-sm",s.dark?"text-red-300":"text-red-600"])},g(l.value.absence_reason),3)):m("",!0)])):m("",!0),t("button",{type:"submit",disabled:P.value,class:n(s.dark?"w-full rounded-xl bg-sky-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:bg-sky-400 disabled:opacity-50 disabled:cursor-not-allowed":"w-full rounded-md bg-green-600 px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-green-500 disabled:opacity-50 disabled:cursor-not-allowed")},[P.value?(o(),i("span",ue,[...e[18]||(e[18]=[t("svg",{class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),H(" Menghantar... ",-1)])])):(o(),i("span",de,"Hantar"))],10,oe)],32)]))}};export{ge as _};
